# 1. 掘金小册

## 1.1. 什么是 API

1. 预定义的函数、接口, 可通过提供的接口访问系统
2. 要实现一个 API 服务器，首先要考虑两个方面

	- 常用的 API 风格: RPC REST
	- 常用的媒体类型: JSON XML Protobuf

## 1.2. GraphQL 简介

1. 新的 API 标准:  提供了一种比 REST 更有效、更强大和更灵活的替代方案
2. 由 Facebook 开发并开源的, 现在由来自世界各地的公司和个人组成的大型社区维护
2. 声明式 -> 数据获取: 可以准确、指定的获取需要哪些数据
3. 只需开放一个端点: 一个路由

## 1.3. 和 REST 对比
	
### 1.3.1. 规范(定义)

		REST 是架构标准、实际上没有标准的规范、没有标准的官方定义
		QL 有完整的规范草案、是一种查询语言而不是一种体系架构、有一套良好的工具、有着繁荣的生态系统

### 1.3.2. 端点个数

		REST 多个端点,  通过 路由 + HTML 动词(GET、POST、PUT、DELETE) 来创建不同功能的接口
		QL 单个端点(一个接口),  可查询所有要查的数据、可修改所有相关数据、可合并查询、修改、可任意组合
	
### 1.3.3. 定制化需求(只想要想要的数据、字段)

		REST 后端返回哪些字段, 前端接口拿到的就有哪些字段, 前端无法自定义需要的字段
		QL 可以自定义请求要返回哪些字段, 前端只请求需要的字段, 可大大减小服务器压力

## 1.4. 具有可视化平台: https://studio.apollographql.com/sandbox/explorer
		QL 提供了解析平台, 可查看服务模型、接口定义等(文档)

## 1.5. 访问嵌套数据资源

> 例: 一个用户有十个好友(通过 ID 进行关联) , 想要查询用户信息以及他所有朋友的信息

REST 实现:

1. 接口 A 返回用户信息, 以及十个好友 ID, 然后再调 十次接口 A 返回好友的信息 `调了 11 次接口`
2. 接口 B 直接返回当前用户, 以及十个好友信息

QL 

只需要一个接口,  进行嵌套获取数据
例子查看笔记, 无限嵌套
  
2. 如果我还想要这十个好友所有好友信息？ 改接口？不改还是得掉好几次接口？如果我还想要十个好友的所以好友的所有好友的信息呢？
		QL 
			只需要一个接口,  进行嵌套获取数据
			例子查看笔记, 无限嵌套
	类型
		 REST: 基于 JSON, 无法提供类型控制( 前端请求参数类型的控制、后端返回数据类型的控制 )
		QL: 具有 Type System, 可针对前端参数、后端返回数据进行校验
		可自定义基础数据类型、比如 Date 确定入参出参的格式
	哪个更好
		有单一的赢家、这完全取决于你的需求
		QL 适合
			数据复杂、多
			客户端可能只需要数据的子集(只想要自己需要的数据)
			需要多次嵌套查询
